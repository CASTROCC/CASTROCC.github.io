<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>红黑树 | 大虾</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="平衡二叉树由于非平衡二叉树在某些情况下引起恶劣操作，所以引入了平衡二叉树。平衡二叉树的目地在于删除或插入操作时，都可以维持树的高度与长度成对数，同时保证树的运行时间维持在对数级。 2-3查找树 我们将一颗标准的二叉查找树的节点称为2-节点(1个健2个链接)。我们将含有2个健3条链接的节点称为3-节点。3-节点的每条链接中都对应着其中保存的健分割产生的一个区间。  2-3查找树的组成 2-节点: 含">
<meta property="og:type" content="article">
<meta property="og:title" content="红黑树">
<meta property="og:url" content="http://yoursite.com/2019/11/17/2019.11.18%20%E7%BA%A2%E9%BB%91%E6%A0%91/">
<meta property="og:site_name" content="大虾">
<meta property="og:description" content="平衡二叉树由于非平衡二叉树在某些情况下引起恶劣操作，所以引入了平衡二叉树。平衡二叉树的目地在于删除或插入操作时，都可以维持树的高度与长度成对数，同时保证树的运行时间维持在对数级。 2-3查找树 我们将一颗标准的二叉查找树的节点称为2-节点(1个健2个链接)。我们将含有2个健3条链接的节点称为3-节点。3-节点的每条链接中都对应着其中保存的健分割产生的一个区间。  2-3查找树的组成 2-节点: 含">
<meta property="og:locale" content="cn">
<meta property="og:image" content="http://yoursite.com/imgs/bst/2-insert.png">
<meta property="og:image" content="http://yoursite.com/imgs/bst/3-insert.jpeg">
<meta property="og:image" content="http://yoursite.com/imgs/bst/2-3insert.png">
<meta property="og:image" content="http://yoursite.com/imgs/bst/3-3insert.jpeg">
<meta property="og:image" content="http://yoursite.com/imgs/bst/root.png">
<meta property="og:image" content="http://yoursite.com/imgs/bst/split-4.jpeg">
<meta property="og:image" content="http://yoursite.com/imgs/bst/redblank_tree.png">
<meta property="og:image" content="http://yoursite.com/imgs/bst/rotation_tree.png">
<meta property="article:published_time" content="2019-11-16T16:00:00.000Z">
<meta property="article:modified_time" content="2020-05-08T06:48:30.077Z">
<meta property="article:author" content="sam">
<meta property="article:tag" content="数据结构与算法">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/imgs/bst/2-insert.png">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  
<link rel="stylesheet" href="/css/style.css">

  

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">大虾</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">江湖小虾米</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2019.11.18 红黑树" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/17/2019.11.18%20%E7%BA%A2%E9%BB%91%E6%A0%91/" class="article-date">
  <time datetime="2019-11-16T16:00:00.000Z" itemprop="datePublished">2019-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      红黑树
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="平衡二叉树"><a href="#平衡二叉树" class="headerlink" title="平衡二叉树"></a>平衡二叉树</h2><p>由于非平衡二叉树在某些情况下引起恶劣操作，所以引入了<b>平衡二叉树</b>。平衡二叉树的目地在于删除或插入操作时，都可以维持树的高度与长度成对数，同时保证树的运行时间维持在对数级。</p>
<h3 id="2-3查找树"><a href="#2-3查找树" class="headerlink" title="2-3查找树"></a>2-3查找树</h3><blockquote>
<p>我们将一颗标准的二叉查找树的节点称为2-节点(1个健2个链接)。我们将含有2个健3条链接的节点称为3-节点。3-节点的每条链接中都对应着其中保存的健<b>分割</b>产生的一个<b>区间</b>。</p>
</blockquote>
<h4 id="2-3查找树的组成"><a href="#2-3查找树的组成" class="headerlink" title="2-3查找树的组成"></a>2-3查找树的组成</h4><ul>
<li>2-节点: 含有一个健(及其对应的值)和两条链接，左链接指向的2-3树中的健都小于该节点。右链接指向的2-3树中的健都大于该节点。</li>
<li>3-节点: 含有两个健和三条链接， 左链接指向树中健都小于该节点。中链接指向的2-3树中的健都位于该节点的两个健之间，右链接指向的2-3中的树都大于该节点。<br>指向一颗空树的链接被称为空链接</li>
</ul>
<h4 id="2-3查找树的操作"><a href="#2-3查找树的操作" class="headerlink" title="2-3查找树的操作"></a>2-3查找树的操作</h4><ul>
<li><p>查找<br><br>与二分搜索树的插入操作类似，2-3查找树的查找首先需要与节点的健作比较，如果比当前健中的最小元素还要小就继续往左子树中查找，如果位于当前两个健之间，则往中子树中进行查找。否则就往右子树中进行查找。</p>
</li>
<li><p>插入<br><br>2-3查找树的插入操作比较特别。因为一颗平衡二叉树可能是由2-节点和3-节点共同组成。所以平衡二叉树的插入操作又分为一下几种情况。</p>
</li>
</ul>
<ol>
<li><p><b>向2-节点中插入新健</b></br><br> 当向一个2-节点中插入新健时，只需要把这个2-节点替换为一个3-节点，然后将要插入健保存在其中即可。<br> <img src="/imgs/bst/2-insert.png" alt="向2-节点中插入新的健"></p>
</li>
<li><p><b>向一颗只含有3-节点的树中插入新健</b><br> 在向一颗只含有3-节点的树中插入新健的时候，可以先将树变成一颗4-节点，然后将4-节点转换为一颗含有两个2-节点的二叉查找树。同时也是一颗完美平衡的2-3树。插入前树的高度为0，插入后树的高度为1。<br> <img src="/imgs/bst/3-insert.jpeg" alt="向3-节点中插入新的健"></p>
</li>
<li><p><b>向一个父节点为2-节点的3-节点中插入新健</b><br> 假设未命中的树是一颗3-节点，同时该节点的父节点为2-节点。我们需要在维持树的完美平衡的前提下为新健腾出空间。首先我们将3-节点中插入一个新健变成4-节点，然后将其分解为两个2-节点组成的平衡二叉树，将分解后的平衡二叉树的根节点移动至父节点(2-节点)中，将父节点转换为一个3-节点。<br> <img src="/imgs/bst/2-3insert.png" alt="向父节点为2-节点的3-节点中插入新健"></p>
</li>
<li><p><b>向一颗父节点为3-节点的3-节点中插入新健</b><br> 将3的情况推广到一般情况，我们就这样一直向上不断分解临时的4-节点。并将中健插入到更高层的父节点中，直到碰到一个父节点为2-节点或者到达根节点。<br> <img src="/imgs/bst/3-3insert.jpeg" alt="向一颗父节点为3-节点的3-节点中插入新健"></p>
</li>
<li><p><b>分解根节点</b><br> 在4的情况下，假如我们碰到的节点全是3-节点。此时根节点被强插入后变成了一颗4-节点，此时我们可以将根节点分解为两颗2-节点，然后使树的高度加1。<br> <img src="/imgs/bst/root.png" alt="分解根节点"></p>
</li>
</ol>
<p>将一个4-节点分解为一颗2-3树可能有6中情况。这些变换都是局部的，除了相关的链接节点，其他的链接节点都不需要变换。所有的局部变换都不会影响整棵树都有序性和平衡型。但是在某些情况下，分解根节点会导致树的高度加1。从而影响其子节点到根节点的路径长度。<br><img src="/imgs/bst/split-4.jpeg" alt="在一颗2-3树中分解一个4-结点的情况汇总"></p>
<p>平衡二叉树在保证树高度为对数的情况下，使每个节点到根节点的长度更短。由此我们在进行任意查找和插入操作时，访问的节点越少。</p>
<h2 id="红黑二叉查找树"><a href="#红黑二叉查找树" class="headerlink" title="红黑二叉查找树"></a>红黑二叉查找树</h2><p>某种意义上上说，红黑二叉树既是一颗二叉查找树，也是一颗2-3树。使用红黑树的意义在于，既保持了二叉查找树中简洁高效的查找，也保持了2-3节点高效的平衡插入。红黑树的一个重要特征就是为了维持树的平衡，树的右链不能为红链，同时不能出现两红链相连接的情况(出现这种情况通常会将较大的左红链旋转到右链，形成一棵双黑平衡树)。</p>
<h3 id="树的对应关系"><a href="#树的对应关系" class="headerlink" title="树的对应关系"></a>树的对应关系</h3><blockquote>
<p>为了保证插入后红黑树和2-3树的对应关系，我们必须慎重的考虑何时使用左旋转、右旋转和颜色变换。<br><img src="/imgs/bst/redblank_tree.png" alt="红黑树和2-3树的一一对应关系"></p>
</blockquote>
<h4 id="树的变换操作"><a href="#树的变换操作" class="headerlink" title="树的变换操作"></a>树的变换操作</h4><ul>
<li><b>左旋转</b><br><br>  左旋转通常是指，将一条红色的右链接旋转为左链接。核心思路在于 将两个健中较小的健作为根节点该为使用较大者作为根节点。</li>
<li><b>右旋转</b><br><br>  右旋转和左旋转正好相反。将两个健中较小的健移动到根节点的位置。</li>
<li><b>颜色变换</b><br><br>  当进行左旋转时，通常会将移动到根节点位置的节点链接与原根节点的链接颜色保持一致。这可能会产生2个相连的红色左链接，接下来我们会看到，在这种情况下，我们需要继续—右旋转。然后将两子链接设置为黑链。</li>
</ul>
<p><img src="/imgs/bst/rotation_tree.png" alt="右旋转h的左链接"></p>
<h4 id="何时进行左、右旋转及颜色变换"><a href="#何时进行左、右旋转及颜色变换" class="headerlink" title="何时进行左、右旋转及颜色变换"></a>何时进行左、右旋转及颜色变换</h4><ul>
<li>如果右子节点是红色的而左子节点是黑色的，进行左旋转。</li>
<li>如果左子节点是红色的，并且它的左子节点也是红色的，则进行右旋转。</li>
<li>如果左、右节点均为红色，则进行左右变换。</li>
</ul>
<h3 id="树的操作"><a href="#树的操作" class="headerlink" title="树的操作"></a>树的操作</h3><p>红黑树中最复杂的代码在于 Put 和 Delete 操作。其他的最大健、最小健、Select 等方法可以继续沿用二叉查找树，而不用改动任何代码。因为红黑树也是一颗二叉查找树，而这些操作不会涉及节点的颜色属性。</p>
<h4 id="插入操作"><a href="#插入操作" class="headerlink" title="插入操作"></a>插入操作</h4><p>红黑树的插入操作包含以下几种情况:</p>
<ul>
<li>向单个2-节点中插入新健</li>
<li>向树底部的2-节点中插入新健</li>
<li>向一颗双健树(3-节点、亦可指左子链接为红链的节点)中插入新健</li>
<li>向树底部的3-节点插入新健(需要考虑当根链为右红链的情况)</li>
<li>将红链接在树中向上传递<h4 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h4>删除操作的麻烦之处在于和插入操作相比起来，为了保证不破坏树的平衡性(保证我们不会删除一个2-节点)，需要沿着左链接向下进行变换，确保当前节点不是2-节点。最后我们将会得到一个含有最小健的3-节点或4-节点，然后我们将最小健删除后回头向上分解所有临时的4-节点。</li>
<li>向下转换2-节点</li>
<li>向上分解4-节点</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/17/2019.11.18%20%E7%BA%A2%E9%BB%91%E6%A0%91/" data-id="ck9wrt0ej0000an2u3auh94vp" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" rel="tag">数据结构与算法</a></li></ul>

    </footer>
  </div>
  
    
 
<script src="/jquery/jquery.min.js"></script>

  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2020/05/07/2020.5.7%20Mac%E4%B8%8B%E4%BD%BF%E7%94%A8%E7%A0%B4%E8%A7%A3%E6%8F%92%E4%BB%B6%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80Goland/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Mac下无法打开Goland
        
      </div>
    </a>
  
  
    <a href="/2019/11/07/2019.11.7%20%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2%E6%A0%91/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">二分搜索树</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    

  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#平衡二叉树"><span class="toc-number">1.</span> <span class="toc-text">平衡二叉树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3查找树"><span class="toc-number">1.1.</span> <span class="toc-text">2-3查找树</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3查找树的组成"><span class="toc-number">1.1.1.</span> <span class="toc-text">2-3查找树的组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3查找树的操作"><span class="toc-number">1.1.2.</span> <span class="toc-text">2-3查找树的操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#红黑二叉查找树"><span class="toc-number">2.</span> <span class="toc-text">红黑二叉查找树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#树的对应关系"><span class="toc-number">2.1.</span> <span class="toc-text">树的对应关系</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#树的变换操作"><span class="toc-number">2.1.1.</span> <span class="toc-text">树的变换操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#何时进行左、右旋转及颜色变换"><span class="toc-number">2.1.2.</span> <span class="toc-text">何时进行左、右旋转及颜色变换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#树的操作"><span class="toc-number">2.2.</span> <span class="toc-text">树的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#插入操作"><span class="toc-number">2.2.1.</span> <span class="toc-text">插入操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除操作"><span class="toc-number">2.2.2.</span> <span class="toc-text">删除操作</span></a></li></ol></li></ol></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
    
  
    

  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2020 sam&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;lenkacc1210@sina.com
    </div>
  </div>
</footer>
 
<script src="/jquery/jquery.min.js"></script>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 
<script src="/js/is.js"></script>



  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<script src="/js/elevator.js"></script>

  </div>
</body>
</html>